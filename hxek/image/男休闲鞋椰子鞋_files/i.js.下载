!function(){var t=window;window.parent!==window&&window.inDapIF&&(t=window.parent);var e="__qq_qidian_da_market",n=t[e]||"qidianDA";if(t[e]=n,n){var r=t[n]=t[n]||function(){r[e]=r[e]||[],r[e].push(arguments)};if(!r.loaded){r.loaded=!0;var i,o="1.2.0",a=t.location,s=a.protocol,c="https://v.qidian.qq.com",u="https://admin.qidian.qq.com",d=new Date,h=function(){var t;try{var e=new Uint32Array(1);window.crypto.getRandomValues(e),t=2147483647&e[0]}catch(e){t=Math.floor(2147483648*Math.random())}return t},l=function(){return h().toString(36)},f="S3EVENT_LISTENERS"+l(),p=function(t,e,n){var r=function(e){n.call(t,e)},i=e=e.replace(/^on/i,"");e=(e||"").toLowerCase(),t.addEventListener?t.addEventListener(i,r,!1):t.attachEvent&&t.attachEvent("on"+i,r);var o=t[f]=t[f]||[];return o[o.length]=[e,n,r,i],t},g=function(t,e,n){var r=n;e=e.replace(/^on/i,"").toLowerCase();for(var i,o,a,s=t[f],c=!r,u=s.length;u--;)(i=s[u])[0]!==e||!c&&i[1]!==r||(o=i[3],a=i[2],t.removeEventListener?t.removeEventListener(o,a,!1):t.detachEvent&&t.detachEvent("on"+o,a),s.splice(u,1));return t},v=function(t,e){var n=(e||window).document,r=n.body||n.documentElement;r.insertBefore(t,r.firstChild)},m=function(t){return function(){var e=window.console;void 0!==e&&"function"==typeof e[t]&&e[t].apply(e,arguments)}},y=m("log");y.group=m("group"),y.groupEnd=m("groupEnd");var w=function(){this._s={},this._avg={},this._max={}};w.prototype.start=function(t,e){this._s[t]=e?+e:+new Date},w.prototype.end=function(t,e){var n=this._s[t];this._s[t]=null;var r=(e?+e:+new Date)-n;this._max[t]=Math.max(r,this._max[t]||0);var i=this._avg[t];i?(i.s=(i.s*i.n+r)/(i.n+1),++i.n):i=this._avg[t]={s:r,n:1}},w.prototype.encode=function(){var t="",e=this._avg;for(var n in e)e.hasOwnProperty(n)&&(t+=n+"("+Math.round(e[n].s||0)+"_"+Math.round(this._max[n]||0)+")");return t};var _=new w,q={Boolean:1,Number:1,String:1,Function:1,Array:1,Date:1,RegExp:1,Object:1,Error:1},k=Object.prototype.toString,b=function(t){if(null==t)return String(t);var e=ue(t),n="object";return e===n||"function"===e?(e=k.call(t).slice(8,-1),q[e]?e.toLowerCase():n):ue(t)},S=function(t){if(!t)return"";var e=[],n=/\[\]$/,r=fe().encodeURIComponent,i=function(t,n){n="function"==typeof n?n():null==n?"":n,e[e.length]=r(t)+"="+r(n)};return function t(r,o){var a,s;switch(b(o)){case"array":if(r)for(a=0,s=o.length;a<s;a++){if(n.test(r))i(r,o[a]);else t(r+"["+("object"===b(o[a])?a:"")+"]",o[a])}else for(a=0,s=o.length;a<s;a++)t(o[a].key,o[a].value);break;case"object":i(r,JSON.stringify(o));break;default:o=""+o,r?i(r,o):e[e.length]=o}return e}("",t).join("&").replace(/%20/g,"+")},E=function(){return"sendBeacon"in window.navigator},I=function(){try{if("XMLHttpRequest"in window&&"withCredentials"in new window.XMLHttpRequest)return"xhr";if("XDomainRequest"in window)return"xdr"}catch(t){}return""},x=/msie (\d+\.\d+)/i.test(navigator.userAgent)?document.documentMode+""||RegExp.$1:"",O=function(t,e,n){var r=[t,e].join(t.indexOf("?")>=0?"&":"?"),i="S3PING_IMG"+l(),o=new Image;window[i]=o;var a=function(t){if(o.onload=o.onerror=o.onabort=null,window[i]=null,o=null,n){var e=null;t&&((e=new Error).name="ImgPing"+t),n(e)}};return o.onload=function(){a()},o.onerror=function(){a("Error")},o.onabort=function(){a("Abort")},o.src=r,!0},C=function(t,e){return E()&&window.navigator.sendBeacon(t,e)},D=function(t,e,n){if("xhr"!==I())return!1;var r=new window.XMLHttpRequest;return r.open("POST",t,!0),r.withCredentials=!0,r.setRequestHeader("Content-Type","text/plain"),n&&(r.onreadystatechange=function(){if(4===r.readyState){var t=r.status,e=null;if(!(t>=200&&t<400)){var i="XhrPing"+(t<500?"ClientError":"ServerError");(e=new Error(i+" "+t)).name=i}n(e)}}),r.send(e),!0},A=function(t,e,n){e=function(t,e){"string"!=typeof t&&(t=S(t));var n=e&&e.randomKey;return(n=null==n?"z":n)&&(t+=(t?"&":"")+n+"="+l()),t}(e,n);var r=t.match(/(?:https?|ftp):\/\/[^\/]+/);if(!r)throw new Error('URL: "'+t+'" not absolute url.');var i=r[0],o=n&&n.transport,a=n&&n.callback;return"img"===o?O(t,e,a):"xhr"===o?D(t,e,a):"beacon"===o?C(t,e):function(t,e,n){var r=t.length+n.length+1;return x&&r>2083&&r-e.length>2048}(t,i,e)?!(a||!C(t,e))||(!!D(t,e,a)||O(t,e,a)):O(t,e,a)},T=function(t,e,n){var r=E();(n=n||{}).transport=r?"beacon":"img",A(t,e,n)},j=function(t){this._data=t||[]};j.prototype.on=function(t){this._data[t]=!0},j.prototype.off=function(t){this._data[t]=!1},j.prototype.merge=function(t){for(var e=this._data.slice(),n=t._data,r=0;r<n.length;r++)e[r]=e[r]||n[r];return new j(e)},j.prototype.encode=function(){for(var t=[],e=0;e<this._data.length;e++)this._data[e]&&(t[Math.floor(e/6)]^=1<<e%6);for(e=0;e<t.length;e++)t[e]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".charAt(t[e]||0);return t.join("")+"~"};var P=function(){this._gFlags=new j,this._allFlags={}};P.prototype.flag=function(t,e){var n;if(e){var r=this._allFlags;r[e]=r[e]||new j,n=r[e]}else n=this._gFlags;n.on(t)},P.prototype.encode=function(t){var e=this._allFlags[t],n=this._gFlags;return(e?n.merge(e):n).encode()};var M=new P,$=function(t){return t.toString(36)},L="__QIDIANDA_SENDED",R=function(t,e,n){this.module=t,this.version=e,this.trackingServer=n};R.prototype={module:"",version:"",trackingServer:"",wrap:function(t,e,n,r){var i=this,o=null==e||"function"===b(e),a=o?e:e[t],s=function(){var e=r?r.id:null;try{var o;return n&&M.flag(n,e),_.start(t),a&&(o=a.apply(this,arguments)),_.end(t),o}catch(n){if(!n[L]){n[L]=!0;var s=r?r.getCommonQuery(!0):null;i.sendError("err",t,n.name,n.message,e,s)}throw n}};return s.displayName=t,o||(e[t]=s),s},errorQueue:[],sending:!1,sendError:function(t,e,n,r,i,o,a){if(!(100*Math.random()>=1))if(this.sending)this.errorQueue.push(arguments);else{this.sending=!0;var s=fe().encodeURIComponent,c=this.trackingServer+"/ping/err";if(o=(o||"v="+this.version+"&t="+$(+new Date))+"&fg="+M.encode(i)+"&tp="+s(t)+"&p1="+s(this.module+"-"+e)+(n?"&p2="+s(n.slice(0,100)):"")+(r?"&p3="+s(r.slice(0,100)):""),a)T(c,o);else{var u=this;A(c,o,{callback:function(){u.sending=!1;var t=u.errorQueue.shift();t&&u.sendError.apply(u,t)}})}}}};var N={},Q=function(t,e){var n=parseInt(t.length,10)||0;if(0===n)return!1;for(var r=0;r<n;){if(e===t[r])return!0;r++}return!1},V=function(t){var e=t||window,n="document";return e[n]&&(e=e[n]),"prerender"===e.visibilityState},B=function(t,e){if(!function(t){var e="navigator";return(t=t||window)[e]&&"preview"===t[e].loadPurpose}(t=t||window)){var n=t.document,r=!1,i=function(){e(t)};V(t)?p(n,"visibilitychange",(function e(){r||V(t)||(r=!0,i(),g(n,"visibilitychange",e))})):i()}},U=function(t,e,n){var r=t.length;if(r>0){n=n||r,e=e||0;for(var i=new Array(n-e),o=0,a=e;a<n;a++,o++)i[o]=t[a];return i}return[]},F=function(t){return(t=String(t)).charAt(0).toUpperCase()+t.slice(1).toLowerCase()},H=function(t){return String(t).replace(new RegExp("([.*+?^=!:${}()|[\\]/\\\\-])","g"),"\\$1")},J=function(t,e,n){t=(n&&n._storage_prefix||"")+t;for(var r=[],i=(e=e||window).document.cookie.split(";"),o=new RegExp("^\\s*"+H(t)+"=\\s*(.*?)\\s*$"),a=0;a<i.length;a++){var s=i[a].match(o);s&&(r[r.length]=fe().decodeURIComponent(s[1]))}return r},W=function(t,e,n,r,i,o,a){n=n||window,e=fe().encodeURIComponent(e);var s=(a&&a._storage_prefix||"")+t+"="+e+"; ";if(null!=o&&(s+="path="+o+"; "),null!=r){var c=new Date;c.setTime(c.getTime()+r),s+="expires="+c.toGMTString()+"; "}null!=i&&(s+="domain="+i+";");var u=n.document,d=u.cookie;if(u.cookie=s,d===u.cookie){for(var h=J(t,null,a),l=0;l<h.length;l++)if(e===h[l])return!0;return!1}return!0},G="S3COOKIENAME"+l(),X=function(){var t=window.document;if(window.navigator.cookieEnabled)return!0;t.cookie=G+"=1";var e=-1!==t.cookie.indexOf(G+"=");return t.cookie=G+"=1; expires=Thu, 01-Jan-1970 00:00:01 GMT",e},z=function(){var t="S3LOCALSTORAGE"+l(),e="localStorage";try{return window[e].setItem(t,1),window[e].removeItem(t),!0}catch(t){return!1}},K=function(){var t="DocumentTouch";return!!("ontouchstart"in window||window[t]&&document instanceof window[t])},Y=function(){this.tasks={}};Y.prototype.set=function(t,e){this.tasks[t]=e},Y.prototype.get=function(t){return this.tasks[t]};var Z=new Y,tt=function(){};tt.prototype.run=function(t){var e=t.getPVParams();_.start("req-pv"),t.ping("$pageview",e,1)},tt.prototype.remove=function(t){},Z.set("pv",tt);var et=!1,nt=window.navigator,rt=nt.userAgent,it=null!=window.chrome&&"Google Inc."===nt.vendor&&/Chrome/.test(rt)&&-1===rt.indexOf("OPR")&&-1===rt.indexOf("Edge"),ot=window.navigator.userAgent,at=/iphone|ipod|android.*mobile|windows.*phone|blackberry.*mobile/i.test(ot),st=function(){this.removed=!1};st.prototype.run=function(t){if(!it&&!at){var e=t.get("win");!function(t,e){var n=(e=e||window).document,r="DOMContentLoaded",i=r+42,o=n[f]=n[f]||[];if(o[o.length]=[i,t,t,r],!et){et=!0;var a=!1;if("complete"===n.readyState||"loading"!==n.readyState&&!n.documentElement.doScroll)fe().setTimeout(c);else if(n.addEventListener)n.addEventListener("DOMContentLoaded",d),e.addEventListener("load",d);else{n.attachEvent("onreadystatechange",d),e.attachEvent("onload",d);var s=!1;try{s=null==e.frameElement&&n.documentElement}catch(t){}s&&s.doScroll&&function t(){if(!a){try{s.doScroll("left")}catch(e){return fe().setTimeout(t,50)}u(),c()}}()}}function c(){for(var t,r=n[f],o=0;t=r[o];)t[0]===i?((0,t[1])(e),r.splice(o,1)):o++;a=!0}function u(){n.addEventListener?(n.removeEventListener("DOMContentLoaded",d),e.removeEventListener("load",d)):(n.detachEvent("onreadystatechange",d),e.detachEvent("onload",d))}function d(){(n.addEventListener||"load"===e.event.type||"complete"===n.readyState)&&(u(),c())}}(t.wrap("id-cb",(function(){if(this.removed)t.flag(20);else{var n=t.get("ss")+"/da/id.html";(function(t,e){var n=(e||window).document.createElement("iframe");n.src=t,n.title="",n.role="presentation",n.frameBorder="0",n.tabIndex="-1",(n.frameElement||n).style.cssText="position:absolute;width:0;height:0;border:0;",v(n,e)})(n+="?"+S({q:t.get("qid"),p:t.get("pid"),t:t.get("kfuin"),a:t.get("aid"),c:t.get("cid"),s:t.getSid(),src:t.get("src"),pgv_pvi:t.get("pgv_pvi"),v:t.get("ver"),ts:t.getFullApi("id")}),e)}}),19),e)}},st.prototype.remove=function(t){this.removed=!0},Z.set("id",st);var ct=function(t){return t.target||t.srcElement},ut=function(t){var e=(t=t||window).document;return("BackCompat"===e.compatMode?e.body:e.documentElement).clientWidth},dt=function(t){var e=(t=t||window).document;return("BackCompat"===e.compatMode?e.body:e.documentElement).clientHeight},ht=function t(e){var n="",r=e.nodeType;if(1===r||9===r||11===r){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=t(e)}else if(3===r||4===r)return e.nodeValue;return n},lt=function(){};lt.prototype.run=function(t){var e=t.get("win"),n=t.get("doc").documentElement;this.cb=t.wrap("clc-cb",(function(n){var r,i=ct(n),o=t.getCommonData(),a=(i.nodeName||"").toLowerCase();if(o.add("pw",function(t){var e=(t=t||window).document,n=e.body,r=e.documentElement,i="BackCompat"===e.compatMode?n:e.documentElement;return Math.max(r.scrollWidth,n.scrollWidth,i.clientWidth)}(e)),o.add("ph",function(t){var e=(t=t||window).document,n=e.body,r=e.documentElement,i="BackCompat"===e.compatMode?n:e.documentElement;return Math.max(r.scrollHeight,n.scrollHeight,i.clientHeight)}(e)),o.add("bw",ut(e)),o.add("bh",dt(e)),o.add("bx",function(t){var e=(t=t||window).document;return t.pageXOffset||e.documentElement.scrollLeft||e.body.scrollLeft}(e)),o.add("by",function(t){var e=(t=t||window).document;return t.pageYOffset||e.documentElement.scrollTop||e.body.scrollTop}(e)),o.add("tag",a),i.href){var s=i.getAttribute("target");s&&o.add("target",s),o.add("href",i.href)}o.add("x",n.clientX||0),o.add("y",n.clientY||0);var c=0;"a"!==a&&"button"!==a||(r=ht(i),c=1),"input"!==a||"button"!==i.type&&"submit"!==i.type||(r=i.value||"",c=1),r&&o.add("word",r.slice(0,20)),t.ping("$click",o,c)}));var r=t.supportTouch;r&&t.flag(18),p(n,r?"touchstart":"click",this.cb)},lt.prototype.remove=function(t){var e=t.get("doc").documentElement;g(e,"click",this.cb),t.supportTouch&&g(e,"touchstart",this.cb)},Z.set("clc",lt),ge.prototype.remove=function(){void 0===document.removeEventListener||void 0===document[this.hidden]?console.log("This demo requires a browser, such as Google Chrome or Firefox, that supports the Page Visibility API."):document.removeEventListener(this.visibilityChange,this.handleVisibilityChange,!1)};var ft="unload",pt=function(){};pt.prototype.run=function(t){var e=t.get("win"),n=0,r=+new Date,i=new ge((function(t){t?n+=+new Date-r:r=+new Date}));this.cb=function(){try{i.remove(),n+=+new Date-r;var e=t.getCommonData();if(e.add("properties",{$dr:n}),t.qdda&&(t.qdda.bussid||t.qdda.qq||t.qdda.qda_accountInfo)){var o={};t.qdda.bussid&&(o.bussid=t.qdda.bussid),t.qdda.qq&&(o.qq=t.qdda.qq),t.qdda.qda_accountInfo&&(o=ce(ce({},o),t.qdda.qda_accountInfo)),e.add("account",o)}t.ping("$pageclose",e,3)}catch(e){throw t.sendError("err","pc-cb",e.name,e.message,!0),e}},p(e,ft,this.cb)},pt.prototype.remove=function(t){var e=t.get("win");g(e,ft,this.cb)},Z.set("pc",pt);var gt=function(t,e,n,r){this.event=t,this.api=e,this.params=n,this.cb=r};gt.prototype.getQueryData=function(){return this.params},gt.prototype.size=function(){return this.encode({a:1}).length},gt.prototype.ping=function(t,e){var n=this.params.filter({a:1});t?T(this.api,n):A(this.api,n,{callback:e})},gt.prototype.encode=function(t){if(!t&&null!=this._encodeValue&&!this._changed)return this._encodeValue;var e=this.params.encode(t);return this._changed=!1,t||(this._encodeValue=e),e};var vt="QUEUESTORAGE",mt=function(t){var e=window.localStorage.getItem((t&&t._storage_prefix||"")+vt);return JSON.parse(e)},yt=function(t){window.localStorage.removeItem((t&&t._storage_prefix||"")+vt)},wt=function(){var t=E();this.max=I()&&t?8192:2047,this.queue=[]};wt.prototype.run=function(t){this.stopping=!0,this.tracker=t,this.heartBeatInterval=t.get("hbt"),this.batchApi=t.getFullApi("b"),this.eventApi=t.getFullApi("track"),2047===this.max&&this.tracker.flag(27)},wt.prototype.start=function(){this.stopping=!1,this.batchSend()},wt.prototype.stop=function(){this.stopping=!0},wt.prototype.push=function(t,e,n,r){var i=new gt(t,this.eventApi,e,r);if(this.stopping)return this.tracker.flag(24),void this._push(i,n);if(this._push(i,n),n&&n>1){var o=3===n;this.batchSend(o)}else{var a=1===n;this.waitForSend(a)}},wt.prototype._push=function(t,e){e?this.queue.unshift(t):this.queue.push(t)},wt.prototype.waitForSend=function(t){var e=this;if(this.queue.length&&!e.heartBeat){var n=this.tracker.wrap("pq-timer",(function(){e.heartBeat=null,e.batchSend()})),r=t?200:e.heartBeatInterval;e.heartBeat=fe().setTimeout(n,r)}},wt.prototype._sendPing=function(t,e,n){if(this.tracker.canSend()||e){var r=this,i="req-"+t.params;_.start(i),t.ping(e,this.tracker.wrap("pq-ipingcb",(function(e){n&&n(e),e&&r.tracker.sendError("req",t.pingName,e.name),_.end(i)})))}},wt.prototype.batchSend=function(t){var e=this.queue[0];if(e&&(this.tracker.canSend()||t)){this.tracker.get("useOpenId")&&(e.params.getAccoutInfo("wechat")||(e.params.add("properties",{$appid:this.tracker.get("appid")}),e.params.addAccoutInfo("wechat",{openid:this.tracker.get("openid"),appid:this.tracker.get("appid")})));var n=0,r=5,i=function(t){};for(t&&(!function(t,e){if(t&&"Array"==Object.prototype.toString.call(t).slice(8,-1)&&0!==t.length){var n=JSON.stringify(t);try{window.localStorage.setItem((e&&e._storage_prefix||"")+vt,n)}catch(t){return 1}}}(this.queue.slice(1),this.tracker&&this.tracker.qdda),r=1,t=!1,i=function(t){});this.queue.length>0&&n++<r;){var o=this.queue.shift();if("pv"===o.pingName){this.tracker.trigger("pv-done");break}this._sendPing(o,t,a(o,n-1))}this.waitForSend()}function a(t,e){return function(n){t.cb&&t.cb(n),i(e)}}},wt.prototype.compress=function(t){var e=t[0];if(!e)return"";var n={};for(var r in e){var i=e[r];"[object Object]"===Object.prototype.toString.call(i)||"object"!==ue(i)&&(n[r]={v:[i],i:[0]})}},wt.prototype.calQuery=function(t,e){null!=e&&(t=t.slice(0,e));var n=t[0];if(!n)return"";var r="",i="&t="+$(+new Date);if(1===t.length)return"l[]="+n+i;for(var o=0,a=n.length;o<a;o++){for(var s,c=null,u=0,d=t.length;u<d;u++){if(s=t[u].charAt(o),null!=c&&c!==s)return h();c=s}r+=s}function h(){for(var e=[],n=0,a=t.length;n<a;n++)e.push(t[n].slice(o));return(r?"c="+r+"&":"")+"l[]="+e.join("&l[]=")+i}return h()},wt.prototype.remove=function(t){this.heartBeat&&(fe().clearTimeout(this.heartBeat),this.heartBeat=null)},Z.set("pq",wt);var _t=function(t){return t.match(/(.*?)(#.*)/)},qt=function(t){var e=fe();return t=t.replace(/\+/g," "),e.decodeURIComponent(t)},kt=function(t,e){var n=_t(t);if(n&&(t=n[1]),!t)return"";var r=fe(),i=new r.RegExp("(?:&|\\?)?"+H(r.encodeURIComponent(e))+"=([^&]*)(?:&|$)","");return(n=t.match(i))&&n[1]?qt(n[1]):""},bt=function(t){var e=t.charAt(t.length-1);return"&"!==e&&"?"!==e||(t=t.slice(0,-1)),t},St=function(t,e,n){var r=t,i=_t(t),o="";if(i&&(t=i[1],o=i[2]),!t)return r;var a=fe();e=a.encodeURIComponent(e);var s="array"===b(n)?n:[n],c=s.length,u=new a.RegExp("(&|\\?)?("+H(e)+"=)([^&]*)(&|$)","g"),d=0;for(t=t.replace(u,(function(t,e,n,r,i){if(e=e||"",d<c){var o=a.encodeURIComponent(s[d]);return d++,e+n+o+i}return e})),t=bt(t),d<c&&(t+=t.indexOf("?")>=0?"&":"?");d<c;)t+=e+"="+a.encodeURIComponent(s[d]),++d<c&&(t+="&");return t+o},Et=function(t,e){var n=t,r=_t(t),i="";if(r&&(t=r[1],i=r[2]),!t)return n;var o=fe(),a=new o.RegExp("(&|\\?)?"+H(o.encodeURIComponent(e))+"=([^&]*)(?:&|$)","g");return(t=bt(t.replace(a,"$1")))+i},It="_EVENTS",xt=function(){};xt.prototype.on=function(t,e){var n=this[It];n||(n=this[It]={}),(n[t]=n[t]||[]).push(e)},xt.prototype.off=function(t,e){if(t){var n=this[It];if(n&&n[t])if(e)for(var r=n[t],i=0;i<r.length;i++)r[i]===e&&(r[i]=null);else n[t].length=0}else this[It]={}},xt.prototype.trigger=function(t){var e=U(arguments),n=this[It];if(t=e.shift(),n&&n[t])for(var r=n[t],i=0;i<r.length;i++)r[i]&&r[i].apply(this,e)};var Ot=function(t,e){var n=t.prototype,r=function(){};r.prototype=e.prototype;var i=t.prototype=new r;for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o]);t.prototype.constructor=t,t.superClass=e.prototype},Ct=function(t){var e=this;this.json=t&&t.params||[],this.suffixJSON=[],this._prefixLength=0,this.keyMap={},this.json.forEach((function(t,n){e.keyMap[t.key]=n})),this.account={}};Ot(Ct,xt),Ct.prototype.addAccoutInfo=function(t,e){2===arguments.length?this.account[t]=e:1===arguments.length&&(this.account=t)},Ct.prototype.getAccoutInfo=function(t){return t?this.account[t]:this.account},Ct.prototype.prefix=function(t,e){this._add(t,e)},Ct.prototype.add=function(t,e){this._add(t,e)},Ct.prototype.flat=function(){if(this.json&&this.json.length){var t=[];this.json.forEach((function(e){if(ve(e.value))for(var n in e.value){var r=n.replace(/^\$/,"");t.push({key:r,value:e.value[n]})}else t.push(e)})),this.json=t,this.trigger("change")}},Ct.prototype._add=function(t,e,n){if(this.keyMap[t]||0===this.keyMap[t]){n=this.keyMap[t];var r=this.json[n].value;if(ve(e))for(var i in e)r[i]=e[i];else this.json[n].value=e;this.trigger("change")}else{var o={key:t,value:e};null!=n?this.json.splice(n,0,o):(this.keyMap[t]=this.json.length,this.json.push(o)),this.trigger("change")}},Ct.prototype.suffix=function(t,e){var n={key:t,value:e};this.suffixJSON.push(n),this.trigger("change")},Ct.prototype.hasKey=function(t){for(var e=0,n=this.json.length;e<n;e++)if(this.json[e].key===t)return!0;return!1},Ct.prototype.extend=function(t){for(var e in t)t.hasOwnProperty(e)&&null!=t[e]&&this.json.push({key:e,value:t[e]});this.trigger("change")},Ct.prototype.toJSON=function(){var t=this.json.concat(this.suffixJSON);return Object.keys(this.account).length>0&&t.unshift({key:"account",value:this.account}),t},Ct.prototype.filter=function(t){var e,n,r,i=this.json,o=[];for(Object.keys(this.account).length>0&&o.push({key:"account",value:this.account}),e=0,n=i.length;e<n;e++)t[(r=i[e]).key]||o.push(r);var a=this.suffixJSON;for(e=0,n=a.length;e<n;e++)t[(r=a[e]).key]||o.push(r);return o},Ct.prototype.size=function(t){return this.encode(t).length},Ct.prototype.encode=function(t){var e=this.toJSON();return Ct.encode(e,t)},Ct.encode=function(t,e){if(!t||!t.length)return"";var n={};return t.forEach((function(t){n[t.key]=t.value})),n},Ct.encodeValue=function(t){return fe().encodeURIComponent(t).replace(/\(/g,"%28").replace(/\)/g,"%29")};var Dt={query:function(t,e){var n=t.get("win").location.href;return kt(n,e)},setup:function(t,e){!1!==t.get("useOpenId")&&this.setupShare(t,e)},wxConfig:function(t,e,n){var r=this,i=t.get("win").wx;this.wx=i,i&&(i.config({appId:e.wxAppid,timestamp:n.timestamp,nonceStr:n.nonceStr,signature:n.signature,jsApiList:["onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareWeibo","onMenuShareQZone"]}),i.ready((function(){r.setupShare(t,e)})))},setupShare:function(t,e){var n=this,r=t.genUUID(!0);wx.onMenuShareTimeline(n._genShareConfig(t,r,e,1)),wx.onMenuShareAppMessage(n._genShareConfig(t,r,e,2)),wx.onMenuShareQQ(n._genShareConfig(t,r,e,4)),wx.onMenuShareWeibo(n._genShareConfig(t,r,e,5)),wx.onMenuShareQZone(n._genShareConfig(t,r,e,6))},_genShareConfig:function(t,e,n,r){var i=t.get("win"),o=n.link||i.location.href;o=Et(o,"qda_shareopenid"),o=Et(o,"qda_shareid"),o=Et(o,"qda_shareqid"),o=Et(o,"qda_sharelevel");var a=o=Et(o,"qda_sharelinkid");a=St(a,"qda_shareid",e),a=St(a,"qda_shareopenid",t.get("openid")),a=St(a,"qda_shareqid",t.get("qid")),a=St(a,"qda_sharelevel",n.shareLevel+1),a=St(a,"qda_sharelinkid",n.shareLinkid);var s=this,c={title:n.title||"",link:a,imgUrl:n.imgUrl||"",success:function(){s.shared(t,e,n,r,a),s.setupShare(t,n)}};switch(r){case 1:break;case 2:c.desc=n.desc||"",c.type=n.type||"",c.dataUrl=n.dataUrl||"";case 4:case 5:case 6:c.desc=n.desc||" "}return c},shared:function(t,e,n,r,i){var o="";switch(r){case 1:o="分享到微信朋友圈";break;case 2:o="分享给微信朋友";break;case 3:o="微信的其他渠道";break;case 4:o="分享到QQ";break;case 5:o="分享到QQ空间";break;case 6:o="分享到腾讯微博";break;default:o="未知"}var a=t.getCommonData();a.add("properties",{$level:t.get("level"),$share_to:o,$share_id:e,$share_level:n.shareLevel+1,$share_url_path:i}),t.ping("$share",a,1),n.success&&n.success({$share_to:o,$share_id:e,$share_level:n.shareLevel+1,$share_url_path:i})}},At=function(t,e){var n=_t(t);if(n&&(t=n[1]),!t)return"";for(var r=fe(),i=new r.RegExp("(?:&|\\?)?"+H(r.encodeURIComponent(e))+"=([^&]*)(?:&|$)","g"),o=[];n=i.exec(t);)o.push(qt(n[1]));return o.length<=1?o[0]||"":o},Tt=function(){};Tt.prototype.run=function(t,e){e.shareLevel=parseInt(me(t.get("win"),"level"),10)||0,e.shareLinkid=me(t.get("win"),"linkid")||t.genUUID(!0),Dt.setup(t,e)};var jt="weixin".split(","),Pt={weixin:Tt},Mt=function(){this.runners={}};Mt.prototype.run=function(t,e){this.callRunner(t,"run",e)},Mt.prototype.remove=function(t){this.callRunner(t,"remove")},Mt.prototype.callRunner=function(t,e,n){for(var r=0;r<jt.length;r++){var i=jt[r],o=this.runners[i]=this.runners[i]||new Pt[i],a=o[e];a&&a.call(o,t,n)}},Z.set("share",Mt);var $t=function(){},Lt="_pid";$t.prototype.run=function(t){var e=t.get("doc").documentElement,n=this;this.addPid=t.wrap("clc-cb",(function(e){var r=function(t,e,n){"function"==typeof e&&(n=e,e=""),e=(e||"").toLowerCase();for(var r,i,o=t;o&&(r=o,i=void 0,(i=!e||(r&&r.nodeName||"").toLowerCase()===e)&&"function"==typeof n&&(i=n(r)),!i);)o=o.parentNode;return o}(ct(e),"a",(function(t){return t.href}));r&&(At(r.href,"wpa_type")||"wpa"===At(r.href,"_type"))&&(t.set("wpa_clc",!0),n.timeoutId=setTimeout((function(){t.set("wpa_clc",!1)}),250),At(r.href,Lt)||(r.href=r.href+"&"+"_pid="+t.get("pid")))}));var r=t.supportTouch;r&&t.flag(35),p(e,r?"touchstart":"mousedown",this.addPid)},$t.prototype.remove=function(t){var e=t.get("doc").documentElement;this.timeoutId&&clearTimeout(this.timeoutId),g(e,t.supportTouch?"touchstart":"mousedown",this.addPid)},Z.set("wpapid",$t);var Rt=function(){};Rt.prototype.run=function(t){var e=t.get("win"),n=t.get("doc"),r=t.get("ats")+"/ar/ActCap/pvRpt";e.__QIDIAN=e.__QIDIAN||{};var i=t.getCommonData(!0);i.add("eptype",at?2:1),i.add("ua",e.navigator.userAgent),i.add("refurl",t.getReferrer()),i.add("title",n.title),i.add("qidianid",t.get("visitorId")),i.add("visitorid",t.get("visitorId")),i.extend(undefined);var o=e.location.hash;"#"===o.charAt(0)&&(o=o.slice(1)),o&&i.add("uh",o),_.start("req-track"),A(r,i.toJSON(),{transport:"img",callback:t.wrap("track-cb",(function(e){e||(_.end("req-track"),t.trigger("track-done"))}),27)})},Rt.prototype.remove=function(t){},Z.set("track",Rt);var Nt=function(t){var e=1;if(t){var n=0;e=0;for(var r=t.length-1;r>=0;r--)e=(e<<6&268435455)+(n=t.charCodeAt(r))+(n<<14),e=0!=(n=266338304&e)?e^n>>21:e}return e},Qt=function(){this.vals={},xt.apply(this,arguments)};Ot(Qt,xt),Qt.prototype.set=function(t,e){if("string"==typeof t){var n=this.vals[t];n!==e&&(this.vals[t]=e,this.trigger("change",t,e,n))}else{var r=t;for(var i in r)r.hasOwnProperty(i)&&this.set(i,r[i])}},Qt.prototype.get=function(t){return this.vals[t]||""},Qt.prototype.map=function(t){for(var e in this.vals)if(this.vals.hasOwnProperty(e)){var n=this.vals[e];n&&t(e,n)}};var Vt,Bt=new Qt,Ut={wx:{pv:"/mini/pv",id:"/ping/id",b:"/mini/b","/r/o":"/r/o","/jsonp/wx":"/jsonp/wx",token:"/mini/token",share:"/mini/share",evt:"/mini/evt",page:"/mini/page",track:"/events/report"},common:{pv:"/ping/pv",id:"/ping/id",b:"/ping/b","/r/o":"/r/o","/jsonp/wx":"/jsonp/wx",pc:"/ping/pc",clc:"/ping/clc",evt:"/ping/evt",page:"/mini/page",track:"/events/report"}},Ft=["baidu","sogou","so","google","bing","yahoo"],Ht={baidu:"百度",sogou:"搜狗",so:"360",google:"谷歌",bing:"bing",yahoo:"雅虎"},Jt=function(t,e,n){var r=(t=t||window).location,i=function(t){return"/"===(t=function(t){return t?(t.length>1&&t.lastIndexOf("/")===t.length-1&&(t=t.substr(0,t.length-1)),0!==t.indexOf("/")&&(t="/"+t),t):"/"}(t))?1:t.split("/").length}(null!=n?n:r.pathname),o=function(t){return function(t){return 0===t.indexOf(".")?t.substr(1):t}(t).split(".").length}(null!=e?e:r.hostname);return o+(i>1?"-"+i:"")+"-"},Wt=function(t,e,n,r,i){for(var o=J(t,e,i),a=Jt(e,n,r),s=0;s<o.length;s++){var c=o[s];if(0===c.indexOf(a))return c.slice(a.length).replace(/%2d/g,"-")}return""},Gt=function(t,e,n,r,i,o,a){var s=Jt(n,i,o);return W(t,s+(e+="").replace(/\-/g,"%2d"),n,r,i,o,a)},Xt=/[^:]+:\/\/([^:\/]+)/,zt=function(t){var e=t.match(Xt);return e?e[1]:""},Kt={createSid:function(){this._hasCookie=this.supportCookie,this._hasCookie||this.flag(9),this._sidExpiredTime=0;var t=Bt.get("sid");if(t)return this.flag(10),void this.set("sid",t);var e=this.get("win"),n=kt(e.location.search,"ADTAG"),r=$(Nt(n)),i=this.get("doc").referrer,o=$(Nt(i));if(this._hasCookie){var a,s,c,u=this.getCookieSid(),d=u[0],h=u[1];if(!d||!h)return this.flag(11),void this.recreateSid(r,o);if(d&&h){var l=d.split("."),f=l[0],p=l[1];a=n&&f!==r||i&&p!==o&&(s=i,c=e.location.href,!(zt(s)===zt(c)))}if(!a)return this.flag(12),void this._saveSid(d,h);var g=Wt("_qddac",e,null,null,this.qdda).split(".");if(g[0]===r&&g[1]===o)return this.flag(13),void this._saveSid(g[0]+"."+g[1],g[2]+"."+g[3]);this.recreateSid(r,o)}else this.recreateSid(r,o)},recreateSid:function(t,e){var n=(t=t||$(Nt(kt(this.get("win").location.search,"ADTAG"))))+"."+(e=e||$(Nt(this.get("doc").referrer))),r=this.random();this._saveSid(n,r)},refreshCookie:function(){if(this._hasCookie){var t=this.getCookieSid(),e=t[0],n=t[1];if(e&&n){var r=this.get("sid");if(r[0]!==e||r[1]!==n)return void this.flag(15);this._setSidCookie()}else this.recreateSid()}else{+new Date>=this._sidExpiredTime&&(this.flag(14),this.recreateSid())}},_setSidCookie:function(){var t=18e5,e=+new Date,n=new Date;if(n.setHours(23),n.setMinutes(59),n.setSeconds(59),n.setMilliseconds(999),n=+n,this._hasCookie){var r=this.get("win"),i=this.get("sid"),o=Gt("_qdda",i[0],r,Math.min(t,n-e),null,"/",this.qdda);o&=Gt("_qddab",i[1],r,null,null,"/",this.qdda),this._hasCookie=o}this._hasCookie||(this._sidExpiredTime=Math.min(e+t,n))},_saveSid:function(t,e){this._setGlobal("sid",[t,e]),this._setSidCookie()},_getSid:function(){var t=this.get("sid");return t?t.join("."):""},getSid:function(t){return t||this.refreshCookie(),this._getSid()},getCookieSid:function(){var t=this.get("win");return[Wt("_qdda",t,null,"/",this.qdda),Wt("_qddab",t,null,"/",this.qdda)]},setClosedSid:function(){if(this._hasCookie){var t=this.getCookieSid(),e=t[0],n=t[1];if(e&&n){var r=this.get("win"),i=this._getSid();Gt("_qddac",i,r,Math.max(this._getLoadedTime()+5e3,1e4),null,null,this.qdda)}}},_getLoadedTime:function(){var t=this.get("win"),e=t.performance||t.webkitPerformance,n=e&&e.timing;if(!n)return 0;var r=n.navigationStart;return 0===r?0:n.loadEventStart-r}},Yt=pe("i"),Zt="__qq_qidian_da_pid",te=function(t,e,n,r){var i=this;i.qdda=t,Qt.apply(i,arguments),i.name=n,r&&(i.flag(6),i.set(r)),i.supportCookie=X(),i.supportTouch=K(),i.id=e,i.createIds(),i.tasks={},i.task("pq"),i.tasks.pq.start();var o=mt(i.qdda);o&&o.forEach((function(t){var e=new Ct(t);e.hasKey("time_free")||e.add("time_free",!0),i.tasks.pq.push("",new Ct(t))})),yt(i.qdda),i.init()};(function(t,e,n){var r;function i(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}"boolean"!=typeof t?(n=e,e=t,r=i):r=t?function t(e,n){for(var r in n)n.hasOwnProperty(r)&&(ye(n[r])?(e[r]=e[r]||{},t(e[r],n[r])):e[r]=n[r])}:i,r(e,n)})(te.prototype={init:function(){var t=this;this.get("preventAutoTrack")||(t.task("pv"),t.task("pc"),t.on("pv-done",(function(){t.task("id")}))),this.get("singlePage")&&this.singlePageEvent(),t.task("wpapid")},singlePageEvent:function(){try{var t=this;!function(){a.href;var e=window.history.pushState,n=window.history.replaceState;e&&(window.history.pushState=function(){e.apply(window.history,arguments),setTimeout((function(){t.reset()})),a.href}),n&&(window.history.replaceState=function(){n.apply(window.history,arguments),setTimeout((function(){t.reset()})),a.href});var r=e?"popstate":"hashchange";document.addEventListener(r,(function(){setTimeout((function(){t.reset()})),a.href}))}()}catch(t){console.log("QidianDA_WEBSDK SinglePageEvent Error")}},createIds:function(){this.createPid(),this.createQid(),this.createSid(),this.createVisitorId()},_setGlobal:function(t,e){this.set(t,e),Bt.set(t,e)},_genQDAValue:function(t){return"QD."+t},_calQDAValue:function(t){if(!t||"string"!=typeof t)return"";var e=t.match(/QD\.([\w\W]+)/);return e&&e[1]||""},genUUID:function(t){var e=this.get("win"),n=this.get("doc"),r=e.navigator.userAgent+(n.cookie?n.cookie:"")+this.getReferrer()+e.location.href;return r=$(h()^2147483647&Nt(r))+".",t?$(+new Date)+"."+r+l():r+this.random()},createPid:function(){var t=this.get("win"),e="__qq_qidian_da_pid",n=t[e],r=this._calQDAValue(n);r||(r=this.genUUID(),t[e]=this._genQDAValue(r)),this.set("pid",r)},createVisitorId:function(){var t=this.get("win"),e="__QIDIAN",n=e;this.qdda&&this.qdda._storage_prefix&&(n=this.qdda._storage_prefix+e);var r=t[n]&&t[n].visitorId;if(!r){var i="tencentSig";z()?r=this.qdda&&this.qdda._storage_prefix?t.localStorage.getItem(this.qdda._storage_prefix+i):t.localStorage.getItem(i):X()&&(r=(r=J(i,null,this.qdda))&&r[0]),r||(r=(Math.floor(10*Math.random())||1)+function(t,e){var n,r,i="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),o=[];if(e=e||i.length,t)for(n=0;n<t;n++)o[n]=i[0|Math.random()*e];else for(o[8]=o[13]=o[18]=o[23]="-",o[14]="4",n=0;n<36;n++)o[n]||(r=0|16*Math.random(),o[n]=i[19==n?3&r|8:r]);return o.join("")}(3,10)+(new Date).getTime().toString().slice(2,13),z()?this.qdda&&this.qdda._storage_prefix?t.localStorage.setItem(this.qdda._storage_prefix+i,r):t.localStorage.setItem(i,r):X()&&W(i,r,null,null,null,null,this.qdda))}return this.set("visitorId",r),r},createQid:function(){var t,e,n=this.get("win");if(this.supportCookie){var r=this.get("qidkey")||"_qddaz",i=31536e6;t=J(r,null,this.qdda)[0],(e=this._calQDAValue(t))&&!isNaN(Number(e))||(e=this.createVisitorId()),t=this._genQDAValue(e);var o,a=this.get("qiddomain");if(a)W(r,t,n,i,a,"/",this.qdda)&&(o=a);else o=function(t,e,n,r,i,o){var a,s={".com":1,".net":1,".org":1,".edu":1,".gov":1,".cn":1,".tw":1,".hk":1};if(i)for(a=0;a<i.length;a++)s["."+i[a]]=1;var c=n.location.hostname.split("."),u="",d="";for(a=c.length-1;a>=0;a--)if(!s[d="."+c[a]+d]&&W(t,e,n,r,d,"/",o)){u=d;break}return u}(r,t,n,i,["qq.com"],this.qdda);o||W(r,t,n,i,null,"/",this.qdda)}else t=n[Zt],(e=this._calQDAValue(t))||(e=randomId()),n[Zt]=this._genQDAValue(e);return this.set("qid",e),e},setValsByHand:function(t){try{t.appkey&&this.set("appkey",t.appkey),this.qdda&&(this.qdda.da_rpt_type=t.da_rpt_type)}catch(t){console.log("qidianDA_Error","setValsByHand",t)}},getCommonData:function(t){var e=this,n=we(this.qdda),r=new Ct,i={$sdk_version:this.get("ver"),$page_id:this.get("pid"),$sdk_type:"jssdk",$title:this.get("doc").title,$referrer:this.getReferrer()};n.currentSE&&(i.$search_engine=n.currentSE),n.lastSE&&(i.$latest_search_engine=n.lastSE),i.$url=this.get("doc").location.href,this.get("is_first_day")&&(i.$is_first_day=this.get("is_first_day"));var o=this.get("kfuin");o&&r.add("kfuin",o),this.get("appkey")&&r.add("appkey",this.get("appkey")),r.add("type",this.qdda&&this.qdda.da_rpt_type||"track"),r.add("qid",this.get("qid")),r.add("time",+new Date);var a=this.qdda.outerData;if(a)for(var s in a)r.add(s,a[s]);if(this.get("useOpenId")&&this.get("openid")){var c={openid:this.get("openid"),appid:this.get("appid")};this.get("unionid")&&(c.unionid=this.get("unionid")),r.addAccoutInfo("wechat",c)}var u=this.qdda.commonData;if(u)for(var s in u)i[s]=u[s];return["utm","latestutm"].forEach((function(t){var n=e.get(t);if(n)for(var r in n)i[r]=n[r]})),r.add("properties",i),r},getCommonQuery:function(t){return S(this.getCommonData(t).toJSON())},getFullApi:function(t){var e="common";return this.get("useOpenId")&&(e="wx"),this.get("ts")+Ut[e][t]},getReferrer:function(){return this.qdda.referrer||this.get("doc").referrer},ping:function(t,e,n,r){"$pageclose"===t&&this.setClosedSid(),e.add("event",t),this.tasks.pq.push(t,e,n||0,r)},jsonp:function(t,e,n){!function(t,e,n,r,i,o){var a=i?i.ownerDocument:document,s=a.defaultView||a.parentWindow,c=a.createElement("SCRIPT");o=o||"callback",n=n||1e4;var u,d,h=new RegExp("(?:\\?|&)"+o+"=([^&]*)"),f=function(t){return function(){try{if(t){var n=new Error;n.name="Timeout",e.call(s,n)}else{var r=U(arguments);r.unshift(null),e.apply(s,r),fe().clearTimeout(u)}s[d]=null,delete s[d]}catch(n){y(n)}finally{c&&c.parentNode&&c.parentNode.removeChild(c)}}},p=t.match(h);d=p?p[1]:"S3JSONPPREFIX"+l(),s[d]=f(!1),n&&(u=fe().setTimeout(f(!0),n)),p||(t+=(t.indexOf("?")<0?"?":"&")+o+"="+d),function(t,e,n,r,i){if(t.setAttribute("type","text/javascript"),r&&t.setAttribute("charset",r),t.setAttribute("src",e),i)i.insertBefore(t,i.firstChild);else{var o=n.getElementsByTagName("script"),a=o[o.length-1];if(a)a.parentNode.insertBefore(t,a);else{var s=n.getElementsByTagName("head")[0];s.insertBefore(t,s.firstChild)}}}(c,t,a,r,i)}(t+"?"+S(e.toJSON()),n)},task:function(t){var e=this.tasks[t];if(!e){var n=Z.get(t);if(!n)return void this.flag(8);e=this.tasks[t]=new n}var r=U(arguments,1);r.unshift(this),e.run.apply(e,r)},remove:function(){for(var t in this.tasks)"pq"!==t&&this.tasks.hasOwnProperty(t)&&this.tasks[t].remove(this);var e=this.tasks.pq;this.tasks={pq:e}},random:function(){return l()+"."+$(+new Date)},flag:function(t){M.flag(t,this.id)},wrap:function(t,e,n){return Yt.wrap(t,e,n,this)},sendError:function(t,e,n,r,i){Yt.sendError(t,e,n,r,this.id,this.getCommonQuery(!0),i)},track:function(t,e,n){try{var r=this.getCommonData();if("$pageview"===t&&(r=this.getPVParams()),r.add("event",t),this.qdda.bussid||this.qdda.qq||this.qdda.qda_accountInfo){var i={};this.qdda.bussid&&(i.bussid=this.qdda.bussid),this.qdda.qq&&(i.qq=this.qdda.qq),this.qdda.qda_accountInfo&&(i=ce(ce({},i),this.qdda.qda_accountInfo)),r.add("account",i)}r.add("properties",e),this.ping(r,r,0,n)}catch(t){console.log("qidianDA_Error","track",t)}},privateTrack:function(t,e,n,r){try{var i=this.vals;e!==i.appkey&&e!==i.kfuin||this.track(t,n,r)}catch(t){console.log("qidianDA_Error","privateTrack",t)}},getWechatValue:function(t){return this.qdda.wechat&&this.qdda.wechat[t]||this.get(t)},getIDs:function(t){try{console.log("openid:"+this.get("openid")+"qid:"+this.get("qid"));var e={qid:this.get("qid")},n=this.getWechatValue("openid");n&&(e.openid=n);var r=this.getWechatValue("unionid");r&&(e.unionid=r),t&&t(e)}catch(t){console.log("qidianDA_Error","getIDs",t)}},send:function(t){var e="send"+F(t),n=Array.prototype.slice.call(arguments,1);"function"==typeof this[e]&&this[e].apply(this,n)},reset:function(t){try{this.remove(),window[Zt]=null,this.createIds(),this.init()}catch(t){console.log("qidianDA_Error","reset",t)}},canSend:function(){return!this.get("useOpenId")||this.get("openid")},getPVParams:function(){var t=this.get("win");this.get("doc"),this.getFullApi("pv");var e=t.screen,n=e.orientation||e.mozOrientation||e.msOrientation||"";n&&n.type&&(n=n.type),Vt||(Vt={$tz:(new Date).getTimezoneOffset()/60});var r=this.getCommonData(!0),i=t.location.hash,o={};if(o={$level:this.get("level"),$sw:e.width,$sh:e.height,$bw:ut(t),$bh:dt(t)},this.get("fqid")&&(o.$share_qid=this.get("fqid")),this.get("foid")&&(o.$share_oid=this.get("foid")),"#"===i.charAt(0)&&(i=i.slice(1)),i&&(o.$uh=i),r.add("properties",Vt),r.add("properties",o),this.qdda.bussid||this.qdda.qq||this.qdda.qda_accountInfo){var a={};this.qdda.bussid&&(a.bussid=this.qdda.bussid),this.qdda.qq&&(a.qq=this.qdda.qq),this.qdda.qda_accountInfo&&(a=ce(ce({},a),this.qdda.qda_accountInfo)),r.add("account",a)}return r}},Kt),Ot(te,Qt);var ee=["utm_source","utm_medium","utm_campaign","utm_content","utm_term"],ne=null,re="_qd_latest",ie="_qd_fst",oe=["appkey","kfuin","preventAutoTrack"],ae=["bussid","qq","da_rpt_type"];fe((function(){_.start("rdy",d);var n=_e(),i=qe();ke();var a=function(){var t=localStorage.getItem(ie);return t?t==(new Date).setHours(0,0,0,0):(localStorage.setItem(ie,(new Date).setHours(0,0,0,0)),!0)}(),h=pe("i",o,c),f=h.wrap("run",B,1),p=h.wrap("init",(function(t){var d,f={_storage_prefix:"",commonData:null,bussid:null,qda_accountInfo:null,qq:null,outerData:null,wechatInfo:{},win:t,version:o,trackers:{},loadedTrackers:{},referrer:"",createdFunc:null,ready:function(t){M.flag(5),t.call(this)},created:function(t){0===Object.keys(this.trackers).length?this.createdFunc=t:t.call(this)},create:function(e,r,o,d){try{console.log("create"),"string"!=typeof r&&(d=o,o=r,r=""),isNaN(Number(e))&&(r=e,e="");var h,f,p=e+(r?"|"+r:"");if(this.loadedTrackers[p])return;if(this.loadedTrackers[p]=!0,"string"==typeof o?(f=o,h=d||{}):(h=o||{},f=null==d?"_"+l():d),this.trackers[f])throw new Error('Tracker name: "'+f+'" exist.');t.navigator.userAgent.toLowerCase().indexOf("micromessenger")<0&&(h.useOpenId=!1);var g=me(t,"id");h.fid=g;var v=me(t,"openid");h.foid=v;var m=me(t,"qid");h.fqid=m;var y=me(t,"level");h.level=y,r&&(h.appkey=r),e&&(h.kfuin=e),h.win=t,h.doc=t.document,h.ver=this.version,h.ptc=s,h.ts=c,h.ats=u,h.authors="https://da.qidian.qq.com",h.ss="https://combo.b.qq.com",h.hbt=0,h.utm=n,h.latestutm=i,h.is_first_day=a,this.trackers[f]=new te(this,p,f,h),this._runPlugins(),this.createdFunc&&this.createdFunc.call(this)}catch(t){console.log("qidianDA_Error","create",t)}},getBasicInfo:function(t){var e=this;try{var n=[];Object.keys(this.trackers).forEach((function(t){var r=e.trackers[t].vals,i=r.appkey,o=r.kfuin,a=r.preventAutoTrack;he(r,oe);n.push({appkey:i,kfuin:o,preventAutoTrack:a})})),t(n)}catch(t){console.log("qidianDA_Error","getBasicInfo",t)}},setCommonData:function(t,e){try{t=t||{},this.commonData=ce(ce({},this.commonData),t);var n=e||{},r=n.bussid,i=n.qq,o=n.da_rpt_type,a=he(n,ae);this.outerData=ce(ce({},this.outerData),a),r&&(this.bussid=r),i&&(this.qq=i),o&&(this.da_rpt_type=o)}catch(t){console.log("qidianDA_Error","setCommonData",t)}},setAccountInfo:function(t){try{t&&(this.qda_accountInfo=t)}catch(t){console.log("qidianDA_Error","setAccountInfo",t)}},setPreFix:function(t){try{t&&(this._storage_prefix=String(t))}catch(t){console.log("qidianDA_Error","setPreFix",t)}},getTracker:function(t){return this.trackers[t]},eachTracker:function(t){for(var e in this.trackers)this.trackers.hasOwnProperty(e)&&t(e)},plugin:function(t,e){try{if((d=d||{})[t])return;d[t]={opts:e,ran:[]},this._runPlugin(t)}catch(t){console.log("qidianDA_Error","plugin",t)}},setReferrer:function(t){try{this.referrer=t}catch(t){console.log("qidianDA_Error","setReferrer",t)}},_runPlugin:function(t){var e=this,n=d[t];e.eachTracker((function(r){var i=e.getTracker(r);i&&!Q(n.ran,r)&&(i.task(t,n.opts),n.ran.push(r))}))},_runPlugins:function(){if(d)for(var t in d)d.hasOwnProperty(t)&&this._runPlugin(t)}};h.wrap("create",f,4);var p="create,plugin,setReferrer,setCommonData,getBasicInfo,setAccountInfo,setPreFix,ready,created".split(","),g="reset,track,getIDs,setValsByHand,privateTrack".split(",");!function(t,e,n,r,i){(n=n||window)[t]=n[t]||[],i=i||"ready";for(var o=n[t],a=function(t){t.shift||(t=U(t));var n=t.shift();"string"==typeof n?r?r(e,n,t):e[n].apply(e,t):e[i](n)};o.length;)a(o.shift());o.push=a}(e,f,r,h.wrap("mqp-cb",(function(t,e,n){if(Q(p,e))t[e].apply(t,n);else{var r=e.split("."),i=r[1]||r[0],o=2===r.length?r[0]:null,a=function(e){var r=t.getTracker(e);r&&Q(g,i)&&"function"==typeof r[i]&&r[i].apply(r,n)};null==o?t.eachTracker(a):a(o)}}),3))}),2);f(t,p)}),t)}}function se(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ce(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?se(Object(n),!0).forEach((function(e){de(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):se(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ue(t){return ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ue(t)}function de(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function he(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function le(t,e){var n=function(t){var e=(t||window).document.createElement("iframe");return e.src="javascript:false",e.title="",e.role="presentation",e.frameBorder="0",e.tabIndex="-1",(e.frameElement||e).style.cssText="position:absolute;width:0;height:0;border:0;",e}(e=e||window);return v(n,e),function(t,e){var n,r,i=t.ownerDocument,o=!1;try{n=t.contentWindow,r=n.document}catch(a){o=!0,p(t,"load",(function(){n=t.contentWindow,r=n.document,g(t,"load"),e(n,r,i.domain)})),t.src='javascript:void((function () {document.open("text/html", "replace");document.domain = "'+i.domain+'";document.close();})())'}o||e(n,r,"")}(n,(function(e,n,r){null==e.Array?(n.open("text/html","replace")._M_=function(){r&&(this.domain=r),e=this.defaultView||this.parentWindow,t(e)},n.write('<!DOCTYPE html><html><head><meta charset="UTF-8"></head><body onload="document._M_();"></body></html>'),n.close()):t(e)})),n}function fe(t,e){if(e=e||window,i||!t){var n=i||e;return t&&t(n),n}le((function(e){i=e,t(e)}),e)}function pe(t,e,n){if(N[t])return N[t];var r=new R(t,e,n);return N[t]=r,r}function ge(t){var e,n;this.cb=t,void 0!==document.hidden?(e="hidden",n="visibilitychange"):void 0!==document.msHidden?(e="msHidden",n="msvisibilitychange"):void 0!==document.webkitHidden&&(e="webkitHidden",n="webkitvisibilitychange"),e=e,this.handleVisibilityChange=function(){t(document[e])},this.hidden=e,this.visibilityChange=n,void 0===document.addEventListener||void 0===document[e]?console.log("This demo requires a browser, such as Google Chrome or Firefox, that supports the Page Visibility API."):document.addEventListener(n,this.handleVisibilityChange,!1)}function ve(t){return-1!==Object.prototype.toString.call(t).indexOf("Object")}function me(t,e){var n="__qdf"+e+"__",r="qda_share"+e,i=At(t.location.href,r);return i?t.sessionStorage.setItem(n,i):i=t.sessionStorage.getItem(n),i}function ye(t){return t&&"object"===b(t)&&!t.nodeType&&t!==t.window}function we(t){lastSE=J("lastSE",null,t)[0];var e=function(){var t=document.referrer.split("/"),e="";if(t[2]){var n=(t=t[2]).split(".");n[1]&&(e=n[1])}else t="";return e}();return Ft.indexOf(e)>-1&&W("lastSE",e,window,31536e6,null,"/",t),{currentSE:Ht[e]||"",lastSE:Ht[lastSE]||""}}function _e(){if(ne)return ne;var t={};return ee.forEach((function(e){var n=kt(a.href,e);n.length&&(t["$"+e]=n)})),ne=t,t}function qe(){var t,e,n=_e(),r=(t="latest_utm",((e=localStorage.getItem(re))?(e=JSON.parse(e))[t]:void 0)||{});return ee.forEach((function(t){var e="$"+t;n[e]&&(r["$latest_"+t]=n[e])})),r}function ke(){ne&&function(t,e){var n=localStorage.getItem(re);n=n?JSON.parse(n):{};n[t]=e,localStorage.setItem(re,JSON.stringify(n))}("latest_utm",qe())}}();
